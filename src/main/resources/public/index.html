<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>WireMock Admin UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root{
            --bg: #2a1f0f;         /* slate-900 */
            --panel: #272311;      /* gray-900 */
            --muted:#94a3b8;      /* slate-400 */
            --text:#e5e7eb;       /* gray-200 */
            --brand:#6366f1;      /* indigo-500 */
            --brand-2:#22d3ee;    /* cyan-400 */
            --ok:#10b981;         /* emerald-500 */
            --warn:#f59e0b;       /* amber-500 */
            --danger:#ef4444;     /* red-500 */
            --card:#0b1222;       /* darker panel */
            --border: rgba(148,163,184,.25);
        }
        *{ box-sizing:border-box }
        html, body { height:100% }
        body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:linear-gradient(135deg,var(--bg),#020617); color:var(--text); }
        a { color: inherit; text-decoration: none }
        .app { display:grid; grid-template-columns: 260px 1fr; min-height:100vh; transition: grid-template-columns .2s ease; }
        .app.collapsed { grid-template-columns: 56px 1fr; }
        .sidebar {
            background: linear-gradient(180deg, rgba(99,102,241,.15), rgba(34,211,238,.10)), var(--panel);
            border-right:1px solid var(--border);
            padding:20px; position:sticky; top:0; height:100vh;
        }
        .sidebar .collapse-toggle {
            position:absolute; right:8px; top:8px; background: rgba(99,102,241,.2); border:1px solid var(--border); color:var(--text); border-radius:8px; padding:4px 8px; cursor:pointer;
        }
        .app.collapsed .sidebar { padding: 12px; }
        .app.collapsed .sidebar .brand,
        .app.collapsed .sidebar nav,
        .app.collapsed .sidebar .side-actions { display:none }
        .brand { font-weight:800; letter-spacing:.5px; font-size: 18px; display:flex; align-items:center; gap:10px; }
        .brand .dot{ width:10px; height:10px; border-radius:50%; background:linear-gradient(135deg,var(--brand),var(--brand-2)); box-shadow:0 0 18px rgba(34,211,238,.6); }
        nav { margin-top:18px; display:flex; flex-direction:column; gap:6px }
        .navlink { padding:10px 12px; border-radius:10px; color:var(--text); border:1px solid transparent; }
        .navlink:hover { background: rgba(99,102,241,.08); border-color: var(--border); }
        .navlink.active { background: linear-gradient(135deg, rgba(99,102,241,.20), rgba(34,211,238,.12)); border-color: rgba(99,102,241,.3) }
        .content { padding:24px; }
        .toolbar { display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:16px }
        .btn { padding:8px 12px; border-radius:10px; border:1px solid var(--border); background:#0b1222; color:var(--text); cursor:pointer; }
        .btn.primary { background: linear-gradient(135deg,var(--brand),var(--brand-2)); color:#0b1222; border: none; font-weight:700 }
        .btn.warn { border-color: rgba(245,158,11,.4); color:#fff; background:rgba(245,158,11,.15) }
        .btn.danger { border-color: rgba(239,68,68,.4); color:#fff; background:rgba(239,68,68,.15) }
        .muted { color: var(--muted) }
        .cards { display:grid; grid-template-columns: repeat(auto-fill,minmax(320px,1fr)); gap:12px }
        .card { background: var(--card); border:1px solid var(--border); border-radius:14px; padding:14px }
        h1{ margin:0 0 12px 0; font-size:22px }
        h2{ margin:12px 0 8px 0; font-size:16px; color:#cbd5e1 }
        pre { background: #0a0f1f; color: #e2e8f0; padding: 10px; border-radius: 10px; overflow:auto; border:1px solid var(--border) }
        textarea, input { width: 100%; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; color: #e2e8f0; background:#0a0f1f; border:1px solid var(--border); border-radius:10px; padding:8px }
        textarea { min-height: 140px; }
        .grid { display:grid; gap:8px; grid-template-columns: repeat(2, minmax(0,1fr)); }
        @media (max-width:1100px){ .app { grid-template-columns: 1fr } .sidebar{ position:relative; height:auto } }
        @media (max-width:900px){ .grid { grid-template-columns: 1fr; } }
        .accordion { border:1px solid var(--border); border-radius:12px; overflow:hidden; background: #0b1222 }
        .acc-head { display:flex; gap:10px; align-items:center; justify-content:space-between; padding:10px 12px; cursor:pointer; }
        .tag { font-size:12px; padding:3px 8px; border-radius:999px; border:1px solid var(--border); background:rgba(99,102,241,.1) }
        .acc-body { display:none; border-top:1px solid var(--border); padding:12px }
        .row { display:flex; gap:10px; flex-wrap:wrap }
        .pill { font-size:11px; color:#93c5fd; border:1px solid rgba(147,197,253,.35); padding:2px 6px; border-radius:999px }
        /* Table styles */
        .table-wrap { overflow:auto; border:1px solid var(--border); border-radius:12px; background: var(--card) }
        table.mocks { width:100%; border-collapse: separate; border-spacing:0; }
        table.mocks th, table.mocks td { padding:10px; border-bottom:1px solid var(--border); vertical-align: top; }
        table.mocks th { text-align:left; color:#cbd5e1; position:sticky; top:0; background: rgba(10,15,31,.8); backdrop-filter: blur(4px) }
        table.mocks tr:last-child td { border-bottom:none }
        details > summary { cursor:pointer; list-style:none }
        details > summary::-webkit-details-marker { display:none }
        details summary .muted { font-style:italic; }
    </style>
</head>
<body>
<div class="app" id="appRoot">
    <aside class="sidebar">
        <button class="collapse-toggle" onclick="toggleSidebar()" title="Collapse/Expand">â‡”</button>
        <div class="brand"><span class="dot"></span> WireMock Admin</div>
        <nav>
            <a href="#home" class="navlink" id="nav-home">Home</a>
            <a href="#mocks" class="navlink" id="nav-mocks">Existing Mocks</a>
            <a href="#create" class="navlink" id="nav-create">Create New Mock</a>
        </nav>
        <div class="side-actions" style="margin-top:18px; display:flex; flex-direction:column; gap:8px">
            <button class="btn" onclick="refresh()">Refresh</button>
            <button class="btn" onclick="saveToFiles()">Persist to /mappings</button>
            <button class="btn danger" onclick="resetAll()">Reset (danger)</button>
        </div>
    </aside>
    <main class="content">
        <div id="status" class="muted" style="margin-bottom:8px"></div>

        <section id="view-home">
            <div class="card">
                <h1>Welcome</h1>
                <p class="muted">Manage your WireMock mappings with a fast, clean and colorful UI.</p>
                <div class="row" style="margin-top:10px">
                    <a class="btn primary" href="#mocks">Go to Existing Mocks</a>
                    <a class="btn" href="#create">Create a New Mock</a>
                </div>
            </div>
            <div style="margin-top:12px" class="cards">
                <div class="card">
                    <h2>Tips</h2>
                    <ul class="muted">
                        <li>Use regex by prefixing URL with <span class="pill">regex:</span></li>
                        <li>Click a mapping to expand and edit its response.</li>
                        <li>Use Persist to save mappings as files.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="view-mocks" style="display:none">
            <h1>Existing Mocks</h1>
            <div id="list" class="table-wrap"></div>
        </section>

        <section id="view-create" style="display:none">
            <h1>Create New Mapping</h1>
            <div class="card">
                <div>
                    <label>Name</label>
                    <input id="newName" placeholder="User details mock" />
                </div>
                <div class="grid" style="margin-top:8px">
                    <div>
                        <label>Method</label>
                        <input id="newMethod" placeholder="GET" />
                    </div>
                    <div>
                        <label>URL / URL Pattern</label>
                        <input id="newUrl" placeholder="/api/users/1" />
                    </div>
                </div>
                <div class="grid">
                    <div>
                        <label>Status</label>
                        <input id="newStatus" type="number" value="200" />
                    </div>
                    <div>
                        <label>Headers (JSON)</label>
                        <textarea id="newHeaders">{ "Content-Type": "application/json" }</textarea>
                    </div>
                </div>
                <div>
                    <label>Body (JSON string or raw)</label>
                    <textarea id="newBody">{ "hello": "world" }</textarea>
                </div>
                <div class="row" style="margin-top:8px">
                    <button class="btn primary" onclick="createMapping()">Create</button>
                </div>
            </div>
        </section>
    </main>
</div>

<script src="app.js"></script>
</body>
</html>